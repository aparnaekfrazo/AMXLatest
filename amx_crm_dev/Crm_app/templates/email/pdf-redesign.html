<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Invoice</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        table tr th, table tr td {
            width: inherit;
            max-width: 120px;
            text-align: center;
            border: 1px solid #d8d2d2;
        }

        .table>thead>tr>th {
            background: #012762 !important;
            color: white !important;
            border: 1px solid #d8d2d2;
        }

        table {
            border: 1px solid #d8d2d2;
        }

        .invoice_detail {
            float: inline-end;
        }

        .table>tfoot>tr>th {
            color: white;
            border: none;
            text-align: right;
        }

        .table>tfoot>tr>td {
            border: none;
        }

        .comp_logo {
            height: 70px !important;
            width: 120px !important;
        }

        hr {
            display: block;
            height: 1px;
            border: 0;
            border-top: 1px solid #d8d2d2;
            margin: 1em 0;
        }

        .total_bill {
            margin-bottom: 20px !important;
        }

        .qrcode {
            width: 180px;
            height: 180px;
        }

        .black-border {
            border: 1px solid black;
            padding: 8px;
            border-radius: 8px;
        }

        h2, h1, h3 {
            font-family: "Open Sans", sans-serif;
            font-weight: 600;
        }

        h2 {
            font-size: 20px;
        }

        h1 {
            font-size: 24px;
            color: #012762;
        }

        h3 {
            font-size: 16px;
        }
    </style>
</head>
<body>
<div class="container black-border px-0">
    <header class="row gx-0 mx-2">
        <div class="col-12">
            <div class="row d-flex">
                <div class="col-3 d-flex justify-content-center align-items-center">
                    <img src="https://amx-crm-dev.thestorywallcafe.com/{{invoice_data.owner_company_logo}}" alt="{{invoice_data.owner_company_name}} Logo" style="height: 100px; width: 150px;">
                </div>
                <div class="col-6 text-center">
                    <h2 class="mb-space">{{invoice_data.owner_company_name}}</h2>
                    <p class="mb-space">
                        <b>CIN</b>: {{invoice_data.owner_company_cin_num}} |
                        <b>GSTIN</b>: {{invoice_data.owner_company_gst_num}}
                    </p>
                    <p class="mb-space">
                        <b>Office Add</b>: {{invoice_data.owner_billing_address}}
                    </p>
                    <p class="mb-0">
                        <b>Email</b>: {{invoice_data.owner_email}} |
                        <b>Mob No</b>: {{invoice_data.owner_mobile_number}}
                    </p>
                </div>
                <div class="col-3"></div>
            </div>
            <div class="row justify-content-center text-center my-2">
                <h2>INVOICE DETAILS</h2>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="row d-flex black-border my-2">
                <div class="col-12 text-start px-0">
                    <h3><b>Invoice Date:</b> {{ invoice_data.updated_date_time|date:"d/m/Y H:i A" }}</h3>
                    <h3><b>Invoice Number:</b> {{ invoice_data.invoice_number }}</h3>
                    <h3><b>Place Of Supply:</b> {{invoice_data.billing_state}} ({{invoice_data.billing_state_code}})</h3>
                    <h3><b>E-way Bill Number:</b> {{invoice_data.EwbNo}}</h3>
                    <h3><b>E-way Bill Date:</b> {{invoice_data.EwbDt}}</h3>
                    <h3><b>E-way Valid Till:</b> {{invoice_data.EwbValidTill}}</h3>
                </div>
            </div>
            <div class="row d-flex black-border my-2">
                <div class="col-12 text-start px-0">
                    <h3><b>Bill To: </b> {{invoice_data.customer_first_name }} ({{invoice_data.customer_company_name }})</h3>
                    <h3><b>Address: </b> {{invoice_data.customer_billing_address}}, {{invoice_data.customer_billing_pincode}}, {{invoice_data.customer_billing_state}}, {{invoice_data.customer_billing_state_country}}</h3>
                    <h3><b>GSTIN: </b>{{invoice_data.customer_gstin}}</h3>
                    <h3><b>Contact Details:</b> {{invoice_data.customer_email}}, {{ invoice_data.customer_mobile_number }}</h3>
                    <h3><b>Place Of Delivery: </b> {{invoice_data.customer_details.shipping_state}}</h3>
                </div>
            </div>
            <div class="row d-flex my-2">
                <div class="col-12 px-0">
                    <h3><b>Goods Details</b></h3>
                    <table class="table table-responsive">
                        <thead class="text-white">
                            <tr>
                                <th scope="col">Sl no.</th>
                                <th scope="col">Product & Description</th>
                                <th scope="col">HSN Number</th>
                                <th scope="col">Qty</th>
                                <th scope="col">Unit Price</th>
                                <th scope="col">Discount</th>
                                <th scope="col">GST Rates<br>(CGST+SGST+IGST)</th>
                                <th scope="col">Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>
                                    {% if invoice_data.item_name %}
                                        {{ invoice_data.item_name }}
                                    {% elif invoice_data.drone_name %}
                                        {{ invoice_data.drone_name }}
                                    {% endif %}
                                </td>
                                <td>{{invoice_data.hsn_number }}</td>
                                <td>{{invoice_data.quantity }}</td>
                                <td>&#x20B9;{{invoice_data.price }}</td>
                                <td>{{invoice_data.discount }}</td>
                                <td>{{ invoice_data.sgst|add:invoice_data.cgst|add:invoice_data.igst }}%</td>
                                <td>&#x20B9;{{ invoice_data.item_total_price }}</td>
                            </tr>
                            <tr>
                                <td colspan="6"><b>CGST,SGST,IGST</b></td>
                                <td>&#x20B9; {{invoice_data.sum_of_cgst_percentage}} + {{invoice_data.sum_of_sgst_percentage}} + {{invoice_data.sum_of_igst_percentage}}</td>
                            </tr>
                            <tr>
                                <td colspan="6"><b>Discount</b></td>
                                <td>&#x20B9; {{invoice_data.sum_of_discount_amount}}</td>
                            </tr>
                            <tr>
                                <td colspan="6"><b>Total</b></td>
                                <td>&#x20B9; {{invoice_data.amount_to_pay}}</td>
                            </tr>
                            <tr><td colspan="8" style="text-align: start !important;">Total Amount (In Words): </td></tr>
                            <tr>
                                <th colspan="4" rowspan="2">HSN/ SAC</th>
                                <th rowspan="2">Taxable Value</th>
                                <th colspan="2">Integrated Tax</th>
                                <th rowspan="2">Total Tax Amount (&#x20B9;)</th>
                            </tr>
                            <tr>
                                <th>Rate (%)</th>
                                <th>Amount (&#x20B9;)</th>
                            </tr>
                            <tr>
                                <td colspan="4">{{invoice_data.hsn_number}}</td>
                                <td>&#x20B9; {{invoice_data.price_after_discount}}</td>
                                <td>{{invoice_data.cgst + invoice_data.sgst + invoice_data.igst}}%</td>
                                <td>&#x20B9; {{invoice_data.taxable_value}}</td>
                                <td>&#x20B9; {{invoice_data.amount_to_pay}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <footer>
            <div class="row text-center my-2">
                <div class="col-12">
                    <img class="qrcode" src="https://amx-crm-dev.thestorywallcafe.com/{{ invoice_data.qrcode_image }}" alt="QR Code for Invoice">
                </div>
            </div>
            <div class="row text-center total_bill">
                <div class="col-12">
                    <h2 class="mb-space">Thank You for Your Business!</h2>
                </div>
            </div>
        </footer>
    </main>
</div>
</body>
</html>
